{"version":3,"sources":["serviceWorker.ts","variable.tsx","components/header/header.tsx","service/observable.service.ts","util.ts","components/popup/popup.tsx","components/timesheet/timesheet-drag.tsx","components/timesheet/timesheet-edit.tsx","components/timesheet/timesheet-popup.tsx","components/timesheet/timesheet-cell.tsx","components/timesheet/timesheet-data.ts","components/timesheet/timesheet-head.tsx","components/timesheet/timesheet-sidebar.tsx","components/timesheet/timesheet.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","$V","moment","require","Header","props","react_default","a","createElement","className","format","style","cursor","onClick","localStorage","removeItem","reload","Obs","Data","ObservableService","Object","classCallCheck","this","createClass","key","value","name","Subject","asObservable","_this","debounce","arguments","length","undefined","Promise","done","watcher_once","watch","pipe","debounceTime","subscribe","data","setTimeout","unsubscribe","val","set","next","update","v","uuid","$","$UID","format_date","DestroyPopup","removeClass","push","CLEAR_MOVED","CORE_DESTROY_ALL_POPUP","TimeLooper","selected","start","end","step","lists","m","isBefore","add","clone","GenerateEQ","arr","i","GenerateArray","map","concat","join","GenerateKeySubscriber","obj","time","room","restaurant","MousePosition","e","clientX","clientY","x","left","y","top","scrollMath","t","b","c","d","ScrollTo","to","callback","duration","requestAnimFrame","win","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","doc","document","documentElement","scrollLeft","body","parentNode","change","currentTime","animateScroll","amount","Popup","state","popups","_this2","CORE_POPUP","component","setState","toConsumableArray","objectSpread","id","CORE_DESTROY_POPUP","filter","popup","Comp","binding","assign","_this3","renderPopup","Component","TimesheetDrag","direction","preventDefault","SELECTED_CELL","container","drag","onMouseDown","dragStart","GRID_DIRECTION_TOP","stopPropagation","draggable","GRID_DIRECTION_BOTTOM","GRID_DIRECTION_LEFT","GRID_DIRECTION_RIGHT","list_icon","TimesheetEdit","first_name","last_name","status","event_type","icons","number_people","note","charge","locked","target","defineProperty","icon","includes","bind","keys","form","_ref","asyncToGenerator","regenerator_default","mark","_callee3","f","wrap","_context3","prev","parseInt","stop","_x2","apply","parser","times","GetFirstNextTime","selected_cell","grid_data","PUSH_EVENT","type","onChange","handleChange","min","handleIcon","rows","handleSave","next_time","block_count","subtract","isSameOrAfter","NewBook","PopupEmptyCell","_ref3","_popup$bind$selected_","_ref2","_popup$bind","alert","WalkIn","PopupEditCell","_ref4","_popup$bind2","event","ChangeStatus","_clear","GroupingRender","6","5","4","3","2","1","TimesheetCell","createRef","subscribers","my_cell_position","my_fill_cell_position","is_blocked","position","get","GRID_DIRECTION_FINAL","setVertical","openPopupEmpty","disable","vertical","GRID_DIRECTION_HORIZONTAL","addClass","css","_this$subscribers","list_subscribers","_callee","_context","_x","current","getBoundingClientRect","u","group","html","field","limit","split","reduce","__html","styles","ref","emptyCell","onContextMenu","openPopupEdit","width","CELL_WIDTH","timesheet_drag","dangerouslySetInnerHTML","renderContent","num","counter","capacity","Math","round","random","TimesheetData","localstorage","getItem","JSON","parse","DefaultData","events","mouse_move","locations","children","selected_time","TimesheetHead","TimesheetSidebar","child","Timesheet","timelooper","find","pushEvents","setItem","stringify","abrupt","LOCATIONS","CORE_SCROLL","transform","today","date_now","replace","minute_now","hour_now","day_now","minute_15","floor","full_date","height","GRID_START_MOVE","start_mouse","hover_placeholder","curr_mouse","el","el_position","el_index","index","parent","move_direction","direction_right","abs","cells","eq","not","index_moved","el_moved","pos_moved","direction_top","size","check","rooms","r","curr_room_index","findIndex","nextProps","nextState","nextContext","onMouseUp","handleMouseUp","onMouseMove","handleMouseMove","timesheet_sidebar_TimesheetSidebar","timesheet_head_TimesheetHead","timesheet_cell","siblings","App","addEventListener","scrollY","scrollX","header_Header","react_router_dom","react_router","path","components_popup_popup","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2ca229b2.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export enum $V {\r\n    CORE_POPUP,\r\n    CORE_DESTROY_POPUP,\r\n    CORE_DESTROY_ALL_POPUP,\r\n    CORE_SCROLL,\r\n\r\n    SELECTED_CELL,\r\n    CLEAR_MOVED,\r\n\r\n    LOCATIONS,\r\n    EVENTS,\r\n\r\n    // Direction Hover\r\n    GRID_START_MOVE,\r\n    GRID_DIRECTION_HORIZONTAL,\r\n    GRID_DIRECTION_TOP,\r\n    GRID_DIRECTION_BOTTOM,\r\n    GRID_DIRECTION_RIGHT,\r\n    GRID_DIRECTION_LEFT,\r\n\r\n    GRID_DIRECTION_FINAL,\r\n\r\n    PUSH_EVENT,\r\n\r\n\r\n}","import React from 'react'\r\nimport './header.scss'\r\nconst moment = require('moment')\r\n\r\nexport const Header = props => {\r\n    const Clear = () => {\r\n        localStorage.removeItem('_data')\r\n        window.location.reload()\r\n    }\r\n    return (\r\n        <div className=\"header-top\">\r\n            <div className=\"title\">Timeline</div>\r\n\r\n            <div className=\"center\">\r\n\r\n                <div className=\"icon fa fa-chevron-left\"></div>\r\n                <div className=\"info\">\r\n                    <div className=\"date\">\r\n                        {moment().format('dddd')}, {moment().format('LL')}\r\n                    </div>\r\n                    <div className=\"button\">\r\n                        Today\r\n                    </div>\r\n                </div>\r\n                <div className=\"icon fa fa-chevron-right\"></div>\r\n            </div>\r\n\r\n            <div className=\"right\">\r\n\r\n                <div className=\"button\" style={{cursor: 'pointer'}} onClick={() => Clear()}>\r\n                    <div className=\"icon fa fa-trash\"></div>\r\n                    <span>Clear Data</span>\r\n                </div>\r\n\r\n                <div className=\"button\">\r\n                    <div className=\"icon fa fa-plus\"></div>\r\n                    <span>Add a note</span>\r\n                </div>\r\n\r\n                <div className=\"button reservation\">\r\n                    <div className=\"icon fa fa-clock\"></div>\r\n                    <span>Make a reservation</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Subject } from 'rxjs'\r\nimport { debounceTime } from 'rxjs/operators'\r\n\r\nconst Obs: any = {}\r\nconst Data: any = {}\r\n\r\n\r\nexport class ObservableService {\r\n\r\n    static watch(name: any) {\r\n        if (!Obs[name]) Obs[name] = new Subject()\r\n        return Obs[name].asObservable()\r\n    }\r\n\r\n    static watchOnce(name, debounce = 0) {\r\n        return new Promise(done => {\r\n            const watcher_once = this.watch(name)\r\n                .pipe(debounceTime(debounce)).subscribe(data => {\r\n                    setTimeout(() => watcher_once.unsubscribe(), 0)\r\n                    return done(data)\r\n                })\r\n        })\r\n    }\r\n\r\n    static push(name, val) {\r\n        if (!Obs[name]) Obs[name] = new Subject()\r\n\r\n        this.set(name, val);\r\n        Obs[name].next(val)\r\n    }\r\n\r\n\r\n    static set(name, val, update = false) {\r\n        if (!Data[name] || typeof val !== 'object') return Data[name] = val\r\n        if (update) {\r\n            for (const v in val) {\r\n                Data[name][v] = val[v]\r\n            }\r\n        } else {\r\n            Data[name] = val\r\n        }\r\n    }\r\n\r\n    static get(name) {\r\n        return Data[name]\r\n    }\r\n\r\n    static getAndSet(name, val = null) {\r\n        const value = Data[name]\r\n        Data[name] = val\r\n        return value\r\n    }\r\n\r\n}","import { ObservableService } from './service/observable.service'\r\nimport { $V } from './variable'\r\n\r\nconst moment = require('moment')\r\nconst uuid = require('uuid/v4')\r\nconst $ = require('jquery')\r\n\r\nexport const $UID = uuid\r\n\r\nexport const format_date = 'YYYY/MM/DD:HH:mm'\r\n\r\nexport const DestroyPopup = () => {\r\n    $('.cell').removeClass('hover')\r\n    ObservableService.push($V.CLEAR_MOVED, true)\r\n    ObservableService.push($V.CORE_DESTROY_ALL_POPUP, true)\r\n}\r\n\r\nexport const ResetPlaceholderHover = () => {\r\n    $('.timesheet-hover').css({height: 0, width: 0, transform: '', left: 0, top: 0})\r\n}\r\n\r\nexport const NG = (obj = {}, key = '', initial?): any => {\r\n    return key.split('.')\r\n        .reduce(function (o, x) {\r\n            return (typeof o === 'undefined' || o === null) ? o : o[x]\r\n        }, obj) || initial\r\n}\r\n\r\nexport const TimeLooper = (selected: any = {}) => {\r\n    const {start, end, step} = selected\r\n\r\n    const lists: any = []\r\n    for (let m = moment(start); m.isBefore(end); m.add(step || 15, 'minutes')) {\r\n        lists.push(m.clone())\r\n    }\r\n\r\n    return lists\r\n}\r\n\r\nexport const GenerateArray = (start, end) => {\r\n    const arr = start > end ? [end, start] : [start, end]\r\n    const lists = []\r\n\r\n    for (let i = arr[0]; i <= arr[1]; i++) {\r\n        lists.push(i)\r\n    }\r\n\r\n    return lists\r\n}\r\n\r\nexport const GenerateEQ = (start, end) => {\r\n    return GenerateArray(start, end).map(a => {\r\n        return `:eq(${a})`\r\n    }).join(', ')\r\n}\r\n\r\nexport const GenerateKeySubscriber = (obj: any) => {\r\n    const {time, room, restaurant} = obj\r\n    return `${time.format(format_date)}:${room.name}:${restaurant}`\r\n}\r\n\r\nexport const MousePosition = (e) => {\r\n    const {clientX, clientY} = e\r\n\r\n    return {\r\n        x: clientX,\r\n        left: clientX,\r\n\r\n        y: clientY,\r\n        top: clientY\r\n    }\r\n}\r\n\r\n\r\nconst scrollMath = function (t, b, c, d) {\r\n    t /= d / 2\r\n    if (t < 1) {\r\n        return c / 2 * t * t + b\r\n    }\r\n    t--\r\n    return -c / 2 * (t * (t - 2) - 1) + b\r\n}\r\n\r\n\r\nexport function ScrollTo(to, callback?, duration?) {\r\n    // because it's so fucking difficult to detect the scrolling element, just move them all\r\n    const requestAnimFrame = (function () {\r\n        const win: any = window\r\n        return win.requestAnimationFrame || win.webkitRequestAnimationFrame || win.mozRequestAnimationFrame || function (callback) {\r\n            win.setTimeout(callback, 1000 / 60)\r\n        }\r\n    })()\r\n\r\n    const doc: any = document\r\n\r\n    function move(amount) {\r\n        doc.documentElement.scrollLeft = amount\r\n        doc.body.parentNode.scrollLeft = amount\r\n        doc.body.scrollLeft = amount\r\n    }\r\n\r\n    function position() {\r\n        return doc.documentElement.scrollLeft || doc.body.parentNode.scrollLeft || doc.body.scrollLeft\r\n    }\r\n\r\n    var start = position(),\r\n        change = to - start,\r\n        currentTime = 0,\r\n        increment = 20\r\n    duration = (typeof (duration) === 'undefined') ? 500 : duration\r\n    var animateScroll = function () {\r\n        // increment the time\r\n        currentTime += increment\r\n        // find the value with the quadratic in-out easing function\r\n        var val = scrollMath(currentTime, start, change, duration)\r\n        // move the document.body\r\n        move(val)\r\n        // do the animation unless its over\r\n        if (currentTime < duration) {\r\n            requestAnimFrame(animateScroll)\r\n        } else {\r\n            if (callback && typeof (callback) === 'function') {\r\n                // the animation is done so lets callback\r\n                callback()\r\n            }\r\n        }\r\n    }\r\n    animateScroll()\r\n}","import React, { Component } from 'react'\r\nimport { ObservableService } from '../../service/observable.service'\r\nimport { $UID } from '../../util'\r\nimport { $V } from '../../variable'\r\nimport './popup.scss'\r\n\r\nexport interface IPopup {\r\n    id?: string\r\n    component: any\r\n    position?: any\r\n    bind?: any\r\n\r\n    class?: {\r\n        overlay?: string\r\n    }\r\n\r\n}\r\n\r\nclass Popup extends Component {\r\n    state = {\r\n        popups: []\r\n    }\r\n\r\n    componentWillMount() {\r\n        // Watcher Generate Popup\r\n        ObservableService.watch($V.CORE_POPUP).subscribe((obj: IPopup) => {\r\n            const {component} = obj\r\n\r\n\r\n            this.setState({\r\n                popups: [...this.state.popups, {id: $UID(), component, ...obj}]\r\n            })\r\n        })\r\n\r\n        // Watcher Remove Popups\r\n        ObservableService.watch($V.CORE_DESTROY_POPUP).subscribe(id => {\r\n            this.setState({\r\n                popups: this.state.popups.filter((popup: IPopup) => popup.id !== id)\r\n            })\r\n        })\r\n\r\n        ObservableService.watch($V.CORE_DESTROY_ALL_POPUP).subscribe(() => {\r\n            this.setState({popups: []})\r\n        })\r\n    }\r\n\r\n    renderPopup(popup: IPopup) {\r\n        const Comp = popup.component\r\n\r\n        const binding = Object.assign({}, popup)\r\n        delete binding.component\r\n\r\n        return (<Comp key={popup.id} popup={binding}/>)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.popups.map(popup => this.renderPopup(popup))}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Popup","import React, { Component } from 'react'\r\nimport { ObservableService } from '../../service/observable.service'\r\nimport { $V } from '../../variable'\r\n\r\nclass TimesheetDrag extends Component<any> {\r\n\r\n    dragStart(e, direction) {\r\n        e.preventDefault()\r\n        ObservableService.set($V.SELECTED_CELL, {\r\n            ...this.props,\r\n            container: this.props.container,\r\n            drag: true,\r\n            direction\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"timesheet-drag\">\r\n                <div onMouseDown={e => this.dragStart(e, $V.GRID_DIRECTION_TOP)}\r\n                     onClick={e => e.stopPropagation()}\r\n                     draggable={true}\r\n                     className=\"top\">\r\n                </div>\r\n                <div onMouseDown={e => this.dragStart(e, $V.GRID_DIRECTION_BOTTOM)}\r\n                     onClick={e => e.stopPropagation()}\r\n                     draggable={true}\r\n                     className=\"bottom\">\r\n                </div>\r\n                <div onMouseDown={e => this.dragStart(e, $V.GRID_DIRECTION_LEFT)}\r\n                     onClick={e => e.stopPropagation()}\r\n                     draggable={true}\r\n                     className=\"left\">\r\n                </div>\r\n                <div onMouseDown={e => this.dragStart(e, $V.GRID_DIRECTION_RIGHT)}\r\n                     onClick={e => e.stopPropagation()}\r\n                     draggable={true}\r\n                     className=\"right\">\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TimesheetDrag","import React, {Component} from 'react'\r\nimport {ObservableService} from '../../service/observable.service'\r\nimport {DestroyPopup, format_date} from '../../util'\r\nimport {$V} from '../../variable'\r\nimport {GetFirstNextTime} from './timesheet-popup'\r\n\r\n\r\nconst list_icon = [\r\n    'fa-birthday-cake',\r\n    'fa-tree',\r\n    'fa-exclamation-circle',\r\n    'fa-credit-card',\r\n    'fa-book',\r\n    'fa-lock'\r\n]\r\n\r\nclass TimesheetEdit extends Component<any> {\r\n    state = {\r\n        start: null,\r\n        end: null,\r\n        restaurant: null,\r\n        room: null,\r\n\r\n        first_name: 'New',\r\n        last_name: 'User',\r\n        status: 'validated-confirmed',\r\n        event_type: ['birthday-cake'],\r\n        icons: [],\r\n        number_people: 0,\r\n        note: '',\r\n        charge: 0,\r\n        locked: 0\r\n    };\r\n\r\n\r\n    handleChange(e) {\r\n        const target = e.target\r\n        this.setState({\r\n            [target.name]: target.value\r\n        })\r\n\r\n    }\r\n\r\n    async handleIcon(icon) {\r\n        const check: any = this.state.icons.includes(icon)\r\n        if (check) {\r\n            await this.setState({\r\n                icons: this.state.icons.filter(i => i !== icon)\r\n            })\r\n        } else {\r\n            await this.setState({\r\n                icons: [...this.state.icons, icon]\r\n            })\r\n        }\r\n    }\r\n\r\n    async componentWillMount() {\r\n        const bind = this.props.popup.bind\r\n        if (Object.keys(bind.form)) {\r\n            await this.setState(bind.form)\r\n        }\r\n    }\r\n\r\n    async parser() {\r\n        const list_int = ['number_people']\r\n        list_int.map(async f => {\r\n            if (this.state[f]) await this.setState({[f]: parseInt(this.state[f])})\r\n        })\r\n    }\r\n\r\n    async handleSave() {\r\n        const bind = this.props.popup.bind;\r\n        await this.parser();\r\n\r\n        let times = []\r\n\r\n        if (!this.state.start && !this.state.end)\r\n            times = GetFirstNextTime({time: bind.selected_cell.time, grid_data: bind.grid_data});\r\n        ObservableService.push($V.PUSH_EVENT, {\r\n            ...this.state,\r\n            start: this.state.start || times[0].format(format_date),\r\n            end: this.state.end || times[1].format(format_date),\r\n            restaurant: this.state.restaurant || bind.selected_cell.restaurant,\r\n            room: this.state.room || bind.selected_cell.room,\r\n        })\r\n        DestroyPopup()\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"overlay\" onClick={() => DestroyPopup()}></div>\r\n                <div className=\"popup timesheet-edit\">\r\n                    <div className=\"form-group\">\r\n                        <label>First Name</label>\r\n                        <input type=\"text\" name=\"first_name\"\r\n                               value={this.state.first_name}\r\n                               onChange={e => this.handleChange(e)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Last Name</label>\r\n                        <input type=\"text\" name=\"last_name\"\r\n                               value={this.state.last_name}\r\n                               onChange={e => this.handleChange(e)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Number People</label>\r\n                        <input type=\"number\" name=\"number_people\" min=\"0\" step=\"1\"\r\n                               value={this.state.number_people}\r\n                               onChange={e => this.handleChange(e)}/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Icons</label>\r\n                        <div className=\"icon-lists\">\r\n                            {list_icon.map((icon, i) =>\r\n                                <i key={i}\r\n                                   className={`fa ${icon} ${this.state.icons.includes(icon)}`}\r\n                                   onClick={() => this.handleIcon(icon)}>\r\n                                </i>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Note</label>\r\n                        <textarea name=\"note\"\r\n\r\n                                  onChange={e => this.handleChange(e)}\r\n                                  value={this.state.note}\r\n                                  rows={5}/>\r\n\r\n                    </div>\r\n\r\n\r\n                    {/*<div className=\"form-group\">*/}\r\n                    {/*<label>Charge</label>*/}\r\n                    {/*<input type=\"checkbox\" name=\"charge\" value={this.state.charge}*/}\r\n                    {/*onChange={e => this.handleChange(e)}/>*/}\r\n                    {/*</div>*/}\r\n\r\n                    {/*<div className=\"form-group\">*/}\r\n                    {/*<label>Lock</label>*/}\r\n                    {/*<input type=\"checkbox\" name=\"locked\" value={this.state.locked}*/}\r\n                    {/*onChange={e => this.handleChange(e)}/>*/}\r\n                    {/*</div>*/}\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Status</label>\r\n                        <select name=\"status\" value={this.state.status} onChange={e => this.handleChange(e)}>\r\n                            <option value=\"validated-confirmed\">Validated/Confirmed</option>\r\n                            <option value=\"honoured\">Honoured</option>\r\n                            <option value=\"partially-honoured\">Partialy Honoured</option>\r\n                            <option value=\"to-be-validated\">To be validated/optional</option>\r\n                            <option value=\"pending-charge\">Pending charge</option>\r\n                            <option value=\"joined-table\">Joined Table</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <button onClick={() => this.handleSave()}>Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TimesheetEdit","import React from 'react'\r\nimport { ObservableService } from '../../service/observable.service'\r\nimport { DestroyPopup, format_date } from '../../util'\r\nimport { $V } from '../../variable'\r\nimport TimesheetEdit from './timesheet-edit'\r\n\r\n\r\nconst moment = require('moment')\r\nconst $ = require('jquery')\r\n\r\nexport const GetFirstNextTime = ({time, grid_data}) => {\r\n    const clone = time.clone()\r\n    const next_time = grid_data.x === $V.GRID_DIRECTION_RIGHT\r\n        ? clone.add(grid_data.block_count * 15, 'minutes')\r\n        : clone.subtract(grid_data.block_count * 15, 'minutes')\r\n\r\n    return time.isSameOrAfter(next_time)\r\n        ? [next_time, time]\r\n        : [time, next_time]\r\n}\r\n\r\n\r\nconst NewBook = (obj: { popup, grid_data?, form? }) => {\r\n    const {popup, form, grid_data} = obj\r\n\r\n    ObservableService.push($V.CORE_POPUP, {\r\n        component: TimesheetEdit,\r\n        bind: {\r\n            selected_cell: popup.bind.selected_cell,\r\n            grid_data,\r\n            form: form || {}\r\n        }\r\n    })\r\n}\r\n\r\nconst WalkIn = ({popup}) => {\r\n    const {selected_cell, grid_data} = popup.bind\r\n\r\n    const times = GetFirstNextTime({grid_data, time: selected_cell.time})\r\n    if (grid_data.block_count === 0) return alert('Invalid Time Range')\r\n\r\n    ObservableService.push($V.PUSH_EVENT, {\r\n        start: times[0].format(format_date),\r\n        end: times[1].format(format_date),\r\n        restaurant: selected_cell.restaurant,\r\n        room: selected_cell.room,\r\n        last_name: 'Walk In',\r\n        status: 'walk-in'\r\n    })\r\n\r\n    DestroyPopup()\r\n}\r\n\r\nexport const PopupEmptyCell = ({popup}) => {\r\n    const {room, time} = popup.bind.selected_cell\r\n    const {grid_data} = popup.bind\r\n\r\n    const times = GetFirstNextTime({grid_data, time})\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"overlay\" onClick={() => DestroyPopup()}></div>\r\n            <div className=\"popup popup-new-cell\">\r\n                <div className=\"list head\">Room\r\n                    {` ${room.name}`} - {times[0].format('HH:mm')} : {times[1].format('HH:mm')}\r\n                </div>\r\n                <div className=\"list\" onClick={() => NewBook({popup, grid_data})}>New Booking</div>\r\n                <div className=\"list\" onClick={() => WalkIn({popup})}>Walk-in</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const PopupEditCell = ({popup}) => {\r\n    const {room, time, event} = popup.bind\r\n    const ChangeStatus = (obj) => {\r\n        ObservableService.push($V.PUSH_EVENT, {...event, ...obj})\r\n        DestroyPopup()\r\n    }\r\n    return (\r\n        <div>\r\n            <div className=\"overlay\" onClick={() => DestroyPopup()}></div>\r\n            <div className=\"popup popup-edit-cell\">\r\n                <div className=\"list head\">Room {room.name} {moment(time, format_date).format('- HH:mm')}</div>\r\n                <div className=\"list\" onClick={() => ChangeStatus({status: 'honoured'})}>Booking honoured</div>\r\n                <div className=\"list\">Waiting for other guests</div>\r\n                <div className=\"list\" onClick={() => ChangeStatus({_clear: true})}>No show</div>\r\n                <div className=\"list\" onClick={(e) => NewBook({popup, form: popup.bind.event})}>Edit booking</div>\r\n                <div className=\"list\" onClick={() => ChangeStatus({locked: true})}>Freeze</div>\r\n                <div className=\"list\">Cancel</div>\r\n                <div className=\"list\">Customer Information</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component, createRef } from 'react'\r\nimport { distinctUntilChanged } from 'rxjs/operators'\r\nimport { ObservableService } from '../../service/observable.service'\r\nimport { format_date, GenerateKeySubscriber, MousePosition, TimeLooper } from '../../util'\r\nimport { $V } from '../../variable'\r\nimport { IPopup } from '../popup/popup'\r\nimport { CELL_WIDTH } from './timesheet'\r\nimport TimesheetDrag from './timesheet-drag'\r\nimport { PopupEditCell, PopupEmptyCell } from './timesheet-popup'\r\n\r\nconst $ = require('jquery')\r\nconst moment = require('moment')\r\n\r\ninterface Cell {\r\n    siblings: any\r\n    restaurant: any\r\n    time: any\r\n    room: any\r\n}\r\n\r\nconst GroupingRender = {\r\n    6: ['number_people', 'last_name', 'first_name', 'icon:7'],\r\n    5: ['number_people', 'last_name', 'icon:6'],\r\n    4: ['number_people', 'last_name', 'icon:4'],\r\n    3: ['number_people', 'last_name', 'icon:2'],\r\n    2: ['number_people', 'last_name'],\r\n    1: ['last_name'],\r\n}\r\n\r\nclass TimesheetCell extends Component<Cell> {\r\n    container: any = createRef()\r\n\r\n    subscribers: any = []\r\n\r\n    state: any = {\r\n        my_cell_position: 0,\r\n        my_fill_cell_position: 0,\r\n        key: '',\r\n        is_blocked: false,\r\n        event: {},\r\n        subscribers: [],\r\n    }\r\n\r\n    openPopupEdit(e) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        // if (this.state.event.icons.includes('fa-lock')) return\r\n        const data: IPopup = {\r\n            component: PopupEditCell, position: MousePosition(e), bind: {\r\n                ...this.props,\r\n                event: this.state.event\r\n            }\r\n        }\r\n        ObservableService.push($V.CORE_POPUP, data)\r\n    }\r\n\r\n    openPopupEmpty(e) {\r\n        e.stopPropagation()\r\n\r\n        const selected_cell = ObservableService.get($V.SELECTED_CELL)\r\n        const grid_data = ObservableService.get($V.GRID_DIRECTION_FINAL)\r\n        this.setVertical(null, true)\r\n\r\n        const data: IPopup = {\r\n            component: PopupEmptyCell, position: MousePosition(e),\r\n            bind: {selected_cell: selected_cell, grid_data}\r\n        }\r\n        ObservableService.push($V.CORE_POPUP, data)\r\n    }\r\n\r\n    emptyCell(e) {\r\n        e.stopPropagation()\r\n        const data = ObservableService.get($V.SELECTED_CELL)\r\n        if (!data) return this.setVertical(e.clientX)\r\n\r\n        this.openPopupEmpty(e)\r\n    }\r\n\r\n    setVertical(x, disable = false) {\r\n        const vertical = $('.timesheet-vertical')\r\n\r\n        if (disable) {\r\n            ObservableService.set($V.SELECTED_CELL, null)\r\n            vertical.removeClass('active')\r\n            return\r\n        }\r\n\r\n        ObservableService.set($V.SELECTED_CELL, {\r\n            ...this.props,\r\n            container: this.container,\r\n            direction: $V.GRID_DIRECTION_HORIZONTAL\r\n        })\r\n\r\n        vertical.addClass('active')\r\n        vertical.css({left: `${x}px`})\r\n    }\r\n\r\n    componentWillMount(): void {\r\n        const props = this.props\r\n\r\n        const list_subscribers = [\r\n            ObservableService.watch(GenerateKeySubscriber(props))\r\n                .subscribe(async e => {\r\n                if (e) {\r\n                    const duration = TimeLooper({\r\n                        start: moment(e.start, format_date),\r\n                        end: moment(e.end, format_date),\r\n                        step: 15\r\n                    }).length + 1\r\n                    await this.setState({\r\n                        is_blocked: true,\r\n                        event: {...e, duration},\r\n                    })\r\n                } else {\r\n                    await this.setState({\r\n                        is_blocked: false,\r\n                        event: {}\r\n                    })\r\n                }\r\n\r\n            }),\r\n        ]\r\n        this.subscribers.push(...list_subscribers)\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        this.setState({\r\n            my_cell_position: this.container.current.getBoundingClientRect()\r\n        })\r\n    }\r\n\r\n    componentWillUnmount(): void {\r\n        if (this.subscribers.length)\r\n            this.subscribers.map(u => u.unsubscribe())\r\n    }\r\n\r\n\r\n    renderContent() {\r\n        const e = this.state.event\r\n        const group = GroupingRender[e.duration > 5 ? 6 : e.duration]\r\n\r\n        let html = ''\r\n        group.map(field => {\r\n            if (field.includes(':')) {\r\n                const limit = parseInt(field.split(':')[1])\r\n                return html += (e.icons || []).filter((x, key) => key < limit)\r\n                    .reduce((a, b) => `${a}<i class=\"fa ${b}\"></i>`, '')\r\n            }\r\n            if (e[field]) html += `<span>${e[field]}</span>`\r\n        })\r\n\r\n        return {\r\n            __html: html\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const e: any = this.state.event || {styles: {}}\r\n        return (\r\n            <div className=\"cell\"\r\n                 ref={this.container}\r\n                 onClick={(e) => this.emptyCell(e)}>\r\n                {\r\n                    this.state.is_blocked\r\n                        ? <div className={`filled-block ${e.status}`}\r\n                               onContextMenu={(e) => this.openPopupEdit(e)}\r\n                               onClick={e => this.openPopupEdit(e)}\r\n                               style={{...e.styles, width: `${e.duration * CELL_WIDTH}px`}}>\r\n                            <TimesheetDrag {...this} container={this.container}/>\r\n                            <div dangerouslySetInnerHTML={this.renderContent()}></div>\r\n                        </div>\r\n                        : ''\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default TimesheetCell","import { format_date } from '../../util'\r\n\r\nconst moment = require('moment')\r\nconst GenerateArray = (num: number) => {\r\n    let counter: any = []\r\n    for (let i = 0; i < num; i++) {\r\n        counter.push({name: i + 1, capacity: Math.round(Math.random() * 9)})\r\n    }\r\n    return counter\r\n}\r\n\r\nexport interface IEvent {\r\n    first_name: string\r\n    last_name: string\r\n\r\n    number_people?: string\r\n\r\n    status?: string\r\n    event_type?: string\r\n    charge?: number\r\n\r\n    note?: string\r\n\r\n    locked?: number\r\n\r\n    start: string\r\n    end: string\r\n\r\n    icons?: string[]\r\n\r\n\r\n    styles?: any\r\n    duration?: number\r\n    text?: {\r\n        left?: string\r\n        right?: string\r\n    },\r\n    icon?: {\r\n        left?: string\r\n        right?: string\r\n    }\r\n}\r\n\r\nexport const TimesheetData = () => {\r\n    let localstorage: any = localStorage.getItem('_data')\r\n    localstorage = localstorage ? JSON.parse(localstorage) : []\r\n    return {\r\n        ...DefaultData,\r\n        events: localstorage\r\n    }\r\n}\r\n\r\nexport const DefaultData: any = {\r\n    mouse_move: 0,\r\n    locations: [\r\n        {\r\n            name: 'Restaurant 1',\r\n            children: GenerateArray(30)\r\n        },\r\n        {\r\n            name: 'Restaurant 2',\r\n            children: GenerateArray(30)\r\n        }\r\n    ],\r\n    selected_time: {\r\n        start: moment(`${moment().format('YYYY/MM/DD')}:05:00`, format_date),\r\n        end: moment(`${moment().add(1, 'days').format('YYYY/MM/DD')}:05:00`, format_date),\r\n        step: 15\r\n    },\r\n    // events: [\r\n    //     {\r\n    //         id: $UID(),\r\n    //         first_name: 'John',\r\n    //         last_name: 'Lennon',\r\n    //         status: 'validated-confirmed',\r\n    //         room: {name: 5},\r\n    //         restaurant: 'Restaurant 1',\r\n    //         start: '2011/10/11:06:15',\r\n    //         end: '2011/10/11:08:15',\r\n    //     },\r\n    // ]\r\n}","import React from 'react'\r\nimport { TimeLooper } from '../../util'\r\n\r\nexport const TimesheetHead = ({selected}) => (\r\n    <div className=\"head head-scroll\">\r\n        {TimeLooper(selected).map((moment,i) => (\r\n            <div className=\"cell\" key={i}>{moment.format('HH:mm')}</div>\r\n        ))}\r\n    </div>\r\n)","import React from 'react'\r\n\r\nexport const TimesheetSidebar = ({lists}) => {\r\n\r\n    return (\r\n        <div className=\"aside\">\r\n            {lists.map(({name, children}, key) => (\r\n                <div className=\"side-item\" key={key}>\r\n                    {\r\n                        key === 0\r\n                            ? <div className=\"side-list side-placeholder\">\r\n                                <div className=\"name\"></div>\r\n                                <div className=\"placeholder\"></div>\r\n                            </div>\r\n                            : ''\r\n                    }\r\n                    <div className=\"side-list side-scroll side-restaurant\">\r\n                        {/*<div className=\"name restaurant-name\">{name}</div>*/}\r\n                        {/*<div className=\"placeholder placeholder-restaurant\"></div>*/}\r\n                    </div>\r\n\r\n                    <div className=\"list-item side-scroll\">\r\n                        {children.map((child, i) => (\r\n                            <div className=\"group\" key={i}>\r\n                                <div className=\"name-room\">{child.name}</div>\r\n                                <div className=\"capacity-room\">{child.capacity}</div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { ObservableService } from '../../service/observable.service'\r\nimport {\r\n    $UID,\r\n    format_date,\r\n    GenerateEQ,\r\n    GenerateKeySubscriber,\r\n    MousePosition,\r\n    ResetPlaceholderHover,\r\n    ScrollTo,\r\n    TimeLooper\r\n} from '../../util'\r\nimport { $V } from '../../variable'\r\nimport TimesheetCell from './timesheet-cell'\r\nimport { TimesheetData } from './timesheet-data'\r\nimport { TimesheetHead } from './timesheet-head'\r\nimport { TimesheetSidebar } from './timesheet-sidebar'\r\nimport './timesheet.scss'\r\n\r\n\r\n\r\nconst $ = require('jquery');\r\nconst moment = require('moment');\r\n\r\nexport const CELL_WIDTH = 70;\r\nexport const CELL_HEIGHT = 30;\r\n\r\nfunction pad(n, width, z = '0') {\r\n    z = z || '0';\r\n    n = n + '';\r\n    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n\r\n}\r\n\r\n\r\nclass Timesheet extends Component {\r\n\r\n\r\n    state = TimesheetData();\r\n\r\n    timelooper;\r\n\r\n    componentWillMount(): void {\r\n        this.timelooper = TimeLooper(this.state.selected_time);\r\n\r\n        ObservableService.watch($V.PUSH_EVENT).subscribe(async form => {\r\n            const check = this.state.events.find(e => e.id === form.id);\r\n            if (check) {\r\n                this.pushEvents(true);\r\n                if (form._clear === true) {\r\n                    // Delete an event\r\n\r\n                } else {\r\n                    await this.setState({\r\n                        events: this.state.events.map(e => {\r\n                            if (e.id === form.id) return {...e, ...form};\r\n                            return e\r\n                        })\r\n                    })\r\n                }\r\n\r\n                localStorage.setItem('_data', JSON.stringify(this.state.events));\r\n                return this.pushEvents()\r\n            }\r\n\r\n            !form.id ? form.id = $UID(): null ;\r\n            await this.setState({\r\n                events: [\r\n                    ...this.state.events,\r\n                    form\r\n                ]\r\n            })\r\n\r\n            localStorage.setItem('_data', JSON.stringify(this.state.events));\r\n            this.pushEvents()\r\n        })\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        ObservableService.set($V.LOCATIONS, this.state.locations);\r\n        this.pushEvents();\r\n        ObservableService.watch($V.CORE_SCROLL).subscribe(({x, y}) => {\r\n            $('.side-scroll').css({\r\n                transform: `translateX(${x}px)`,\r\n            })\r\n            $('.header-top').css({transform: `translateX(${x}px)`});\r\n            if (y > 80) {\r\n                $('.head').css({transform: `translateY(${y - 80}px)`});\r\n                $('.timesheet-vertical').css({transform: `translateY(-80px)`})\r\n            } else {\r\n                $('.head').css({transform: `translateY(0px)`});\r\n                $('.timesheet-vertical').css({transform: `translateY(0px)`})\r\n            }\r\n\r\n\r\n        })\r\n\r\n        const today = moment();\r\n        const date_now = today.format(format_date.replace('/DD:HH:mm', ''));\r\n        const minute_now = parseInt(today.format('mm'));\r\n        const hour_now = parseInt(today.format('HH'));\r\n        const day_now = parseInt(today.format('DD'));\r\n\r\n\r\n        const minute_15 = Math.floor(minute_now / 15) * 15;\r\n        const full_date = moment(`${date_now}:${hour_now > 5 ? day_now : day_now + 1}:${hour_now}:${minute_15}`, format_date);\r\n\r\n        const length = TimeLooper({start: this.state.selected_time.start, end: moment(full_date, format_date)}).length;\r\n\r\n        const position = 195 + (length * CELL_WIDTH);\r\n        const body = $('body').height();\r\n        $('.timesheet-vertical-stay').css({left: `${position}px`, height: `${body - 110}px`});\r\n        setTimeout(() => ScrollTo((length * CELL_WIDTH) - 100, null), 500)\r\n    }\r\n\r\n\r\n    async handleMouseMove(e) {\r\n        const Obs = ObservableService;\r\n        const selected = Obs.get($V.SELECTED_CELL);\r\n\r\n        if (!selected) return Obs.set($V.GRID_START_MOVE, null);\r\n\r\n        let start_mouse = Obs.get($V.GRID_START_MOVE);\r\n\r\n        if (!start_mouse) {\r\n            Obs.set($V.GRID_START_MOVE, MousePosition(e));\r\n            start_mouse = MousePosition(e)\r\n        }\r\n\r\n        const hover_placeholder = $('.timesheet-hover');\r\n        const curr_mouse = MousePosition(e);\r\n        const el = $(selected.container.current);\r\n        const el_position = el[0].getBoundingClientRect();\r\n        const el_index = el.index();\r\n        const parent = el.parent();\r\n\r\n        let block_count = 0;\r\n        const move_direction = {x: null, y: null};\r\n\r\n        el.addClass('hover');\r\n\r\n        // Only Allow Right & Left\r\n        if (selected.direction === $V.GRID_DIRECTION_HORIZONTAL ||\r\n            selected.direction === $V.GRID_DIRECTION_RIGHT ||\r\n            selected.direction === $V.GRID_DIRECTION_LEFT\r\n        ) {\r\n            const direction_right = curr_mouse.x > start_mouse.x;\r\n            move_direction.x = direction_right ? $V.GRID_DIRECTION_RIGHT : $V.GRID_DIRECTION_LEFT;\r\n\r\n            if (selected.direction === $V.GRID_DIRECTION_RIGHT && !direction_right) return;\r\n            if (selected.direction === $V.GRID_DIRECTION_LEFT && direction_right) return;\r\n\r\n            block_count = Math.floor(Math.abs(el_position.x - curr_mouse.x) / CELL_WIDTH);\r\n\r\n            if (block_count) {\r\n                const cells = parent.find('.cell');\r\n\r\n                const eq = direction_right\r\n                    ? GenerateEQ(el_index, el_index + block_count)\r\n                    : GenerateEQ(el_index, el_index - block_count);\r\n\r\n                cells.filter(eq).addClass('hover');\r\n                cells.not(eq).removeClass('hover')\r\n            }\r\n\r\n            // Step Move for vertical red line\r\n            const index_moved = direction_right\r\n                ? el_index + block_count\r\n                : el_index - block_count;\r\n            const el_moved = parent.find('.cell').eq(block_count ? index_moved : el_index);\r\n            const pos_moved = el_moved[0].getBoundingClientRect().x;\r\n            $('.timesheet-vertical').css({left: `${pos_moved + 35}px`})\r\n\r\n        } else {\r\n            const direction_top = curr_mouse.y < start_mouse.y;\r\n            move_direction.y = direction_top ? $V.GRID_DIRECTION_TOP : $V.GRID_DIRECTION_BOTTOM;\r\n\r\n            if (selected.direction === $V.GRID_DIRECTION_TOP && !direction_top) return;\r\n            if (selected.direction === $V.GRID_DIRECTION_BOTTOM && direction_top) return;\r\n\r\n            hover_placeholder.css({\r\n                left: `${el_position.x}px`,\r\n                top: `${el_position.y}px`,\r\n                width: `${el_position.width}px`,\r\n                height: `${el_position.height}px`\r\n            })\r\n\r\n\r\n            const event = selected.state.event;\r\n            block_count = Math.floor(Math.abs(el_position.y - curr_mouse.y) / CELL_HEIGHT);\r\n            hover_placeholder.css({width: `${el_position.width * (event.duration)}px`});\r\n            if (block_count) {\r\n                const size = block_count * CELL_HEIGHT;\r\n\r\n                direction_top\r\n                    ? hover_placeholder.css({height: `${size}px`, transform: `translateY(-${size}px)`})\r\n                    : hover_placeholder.css({height: `${size}px`, transform: `translateY(${CELL_HEIGHT}px)`})\r\n\r\n            }\r\n        }\r\n\r\n        Obs.set($V.GRID_DIRECTION_FINAL, {...move_direction, block_count})\r\n\r\n    }\r\n\r\n    handleMouseUp(e) {\r\n        const Obs = ObservableService;\r\n        const check = Obs.get($V.SELECTED_CELL);\r\n\r\n        if (!check || check.drag !== true) return;\r\n        ResetPlaceholderHover();\r\n        const selected_cell = Obs.get($V.SELECTED_CELL);\r\n        const grid_data = Obs.get($V.GRID_DIRECTION_FINAL) || {x: 0, y: 0};\r\n        const event = selected_cell.state.event;\r\n\r\n        Obs.set($V.SELECTED_CELL, null);\r\n        $('.cell').removeClass('hover');\r\n\r\n        if (grid_data.x === $V.GRID_DIRECTION_LEFT || grid_data.x === $V.GRID_DIRECTION_RIGHT) {\r\n            const direction_right = grid_data.x === $V.GRID_DIRECTION_RIGHT;\r\n\r\n            if (direction_right) {\r\n                Obs.push($V.PUSH_EVENT, {\r\n                    ...event,\r\n                    end: moment(event.start, format_date).add(grid_data.block_count * 15, 'minutes')\r\n                        .format(format_date)\r\n                })\r\n            } else {\r\n                Obs.push($V.PUSH_EVENT, {\r\n                    ...event,\r\n                    start: moment(event.start, format_date).subtract(grid_data.block_count * 15, 'minutes')\r\n                        .format(format_date)\r\n                })\r\n            }\r\n        } else {\r\n            const direction_top = grid_data.y === $V.GRID_DIRECTION_TOP;\r\n            const rooms = ObservableService.get($V.LOCATIONS)\r\n                .find(r => r.name === event.restaurant).children;\r\n            const curr_room_index = rooms.findIndex(r => r.name === event.room.name);\r\n\r\n            const index_update = rooms.filter((r, i) => {\r\n                return direction_top\r\n                    ? i < curr_room_index && i >= curr_room_index - grid_data.block_count\r\n                    : i > curr_room_index && i <= curr_room_index + grid_data.block_count\r\n            })\r\n\r\n            index_update.map((r, i) => {\r\n                setTimeout(() => Obs.push($V.PUSH_EVENT, {\r\n                    ...event,\r\n                    id: null,\r\n                    room: r\r\n                }), i * 50)\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    pushEvents(clear = false) {\r\n        if (clear) {\r\n            this.state.events.map(e => {\r\n                const key = {time: moment(e.start, format_date), ...e};\r\n                ObservableService.push(GenerateKeySubscriber(key), null)\r\n            })\r\n        } else {\r\n            this.state.events.map(e => {\r\n                const key = {time: moment(e.start, format_date), ...e};\r\n                ObservableService.push(GenerateKeySubscriber(key), e)\r\n            })\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext: any): boolean {\r\n        // Add logic here to prevent rerender all sheet\r\n        return false\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"timetable-root\"\r\n                 onMouseUp={e => this.handleMouseUp(e)}\r\n                 onMouseMove={e => this.handleMouseMove(e)}>\r\n                <TimesheetSidebar lists={this.state.locations}/>\r\n                <div className=\"timetable-item\">\r\n                    <TimesheetHead selected={this.state.selected_time}/>\r\n                    {\r\n                        this.state.locations.map(({name, children}, i) => {\r\n                            return (\r\n                                <div key={i}>\r\n                                    <div className=\"row row-restaurant\">\r\n                                        {/*{this.timelooper.map((m, x) =>*/}\r\n                                        {/*<div key={x} className=\"cell\"></div>*/}\r\n                                        {/*)}*/}\r\n                                        <span className=\"side-scroll\">{name}</span>\r\n                                    </div>\r\n\r\n                                    <div className=\"placeholder-row\">\r\n                                        {children.map((room, r) => (\r\n                                            <div className=\"row\" key={r}>\r\n                                                {this.timelooper.map((moment, y) => (\r\n                                                    <TimesheetCell\r\n                                                        siblings={children}\r\n                                                        key={y}\r\n                                                        restaurant={name}\r\n                                                        time={moment}\r\n                                                        room={room}\r\n                                                    />\r\n                                                ))}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className=\"timesheet-hover\"></div>\r\n                <div className=\"timesheet-vertical\"></div>\r\n                <div className=\"timesheet-vertical-stay current-time\"></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Timesheet\r\n","import React, { Component } from 'react'\nimport './App.scss'\nimport { Header } from './components/header/header'\nimport Popup from './components/popup/popup'\nimport Timesheet from './components/timesheet/timesheet'\nimport { ObservableService } from './service/observable.service'\nimport { $V } from './variable';\nimport {BrowserRouter, Redirect, Route, Switch} from \"react-router-dom\";\n\n\n\nclass App extends Component {\n\n    componentDidMount(): void {\n\n        window.addEventListener('scroll', () => {\n            ObservableService.push($V.CORE_SCROLL, {\n                y: window.scrollY,\n                x: window.scrollX\n            })\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <main>\n                    <Header/>\n                    <div className=\"main-container\">\n                        <BrowserRouter>\n                            <Switch>\n                                <Route path=\"/\" component={Timesheet}/>\n                                <Route path=\"/:data\" component={Timesheet}/>\n                            </Switch>\n                        </BrowserRouter>\n                    </div>\n                </main>\n                <Popup/>\n            </div>\n        )\n    }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport * as serviceWorker from './serviceWorker';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}