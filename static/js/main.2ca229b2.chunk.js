(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(66)},42:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},52:function(e,t,n){},56:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),o=n.n(c);n(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,i=n(5),l=n(6),u=n(9),m=n(8),p=n(10),d=(n(44),n(46),n(19)),f=function(e){return r.a.createElement("div",{className:"header-top"},r.a.createElement("div",{className:"title"},"Timeline"),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"icon fa fa-chevron-left"}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"date"},d().format("dddd"),", ",d().format("LL")),r.a.createElement("div",{className:"button"},"Today")),r.a.createElement("div",{className:"icon fa fa-chevron-right"})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"button",style:{cursor:"pointer"},onClick:function(){return localStorage.removeItem("_data"),void window.location.reload()}},r.a.createElement("div",{className:"icon fa fa-trash"}),r.a.createElement("span",null,"Clear Data")),r.a.createElement("div",{className:"button"},r.a.createElement("div",{className:"icon fa fa-plus"}),r.a.createElement("span",null,"Add a note")),r.a.createElement("div",{className:"button reservation"},r.a.createElement("div",{className:"icon fa fa-clock"}),r.a.createElement("span",null,"Make a reservation"))))},v=n(1),E=n(20),h=n(69),_=n(70),b={},O={},I=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"watch",value:function(e){return b[e]||(b[e]=new h.a),b[e].asObservable()}},{key:"watchOnce",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(a){var r=t.watch(e).pipe(Object(_.a)(n)).subscribe(function(e){return setTimeout(function(){return r.unsubscribe()},0),a(e)})})}},{key:"push",value:function(e,t){b[e]||(b[e]=new h.a),this.set(e,t),b[e].next(t)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!O[e]||"object"!==typeof t)return O[e]=t;if(n)for(var a in t)O[e][a]=t[a];else O[e]=t}},{key:"get",value:function(e){return O[e]}},{key:"getAndSet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=O[e];return O[e]=t,n}}]),e}();!function(e){e[e.CORE_POPUP=0]="CORE_POPUP",e[e.CORE_DESTROY_POPUP=1]="CORE_DESTROY_POPUP",e[e.CORE_DESTROY_ALL_POPUP=2]="CORE_DESTROY_ALL_POPUP",e[e.CORE_SCROLL=3]="CORE_SCROLL",e[e.SELECTED_CELL=4]="SELECTED_CELL",e[e.CLEAR_MOVED=5]="CLEAR_MOVED",e[e.LOCATIONS=6]="LOCATIONS",e[e.EVENTS=7]="EVENTS",e[e.GRID_START_MOVE=8]="GRID_START_MOVE",e[e.GRID_DIRECTION_HORIZONTAL=9]="GRID_DIRECTION_HORIZONTAL",e[e.GRID_DIRECTION_TOP=10]="GRID_DIRECTION_TOP",e[e.GRID_DIRECTION_BOTTOM=11]="GRID_DIRECTION_BOTTOM",e[e.GRID_DIRECTION_RIGHT=12]="GRID_DIRECTION_RIGHT",e[e.GRID_DIRECTION_LEFT=13]="GRID_DIRECTION_LEFT",e[e.GRID_DIRECTION_FINAL=14]="GRID_DIRECTION_FINAL",e[e.PUSH_EVENT=15]="PUSH_EVENT"}(s||(s={}));var N=n(19),C=n(49),R=n(25),T=C,g="YYYY/MM/DD:HH:mm",k=function(){R(".cell").removeClass("hover"),I.push(s.CLEAR_MOVED,!0),I.push(s.CORE_DESTROY_ALL_POPUP,!0)},y=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.start,n=e.end,a=e.step,r=[],c=N(t);c.isBefore(n);c.add(a||15,"minutes"))r.push(c.clone());return r},D=function(e,t){return function(e,t){for(var n=e>t?[t,e]:[e,t],a=[],r=n[0];r<=n[1];r++)a.push(r);return a}(e,t).map(function(e){return":eq(".concat(e,")")}).join(", ")},L=function(e){var t=e.time,n=e.room,a=e.restaurant;return"".concat(t.format(g),":").concat(n.name,":").concat(a)},x=function(e){var t=e.clientX,n=e.clientY;return{x:t,left:t,y:n,top:n}},w=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t};function S(e,t,n){var a=function(){var e=window;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),r=document;var c=r.documentElement.scrollLeft||r.body.parentNode.scrollLeft||r.body.scrollLeft,o=e-c,s=0;n="undefined"===typeof n?500:n;!function e(){var i,l=w(s+=20,c,o,n);i=l,r.documentElement.scrollLeft=i,r.body.parentNode.scrollLeft=i,r.body.scrollLeft=i,s<n?a(e):t&&"function"===typeof t&&t()}()}n(52);var P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={popups:[]},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;I.watch(s.CORE_POPUP).subscribe(function(t){var n=t.component;e.setState({popups:[].concat(Object(E.a)(e.state.popups),[Object(v.a)({id:T(),component:n},t)])})}),I.watch(s.CORE_DESTROY_POPUP).subscribe(function(t){e.setState({popups:e.state.popups.filter(function(e){return e.id!==t})})}),I.watch(s.CORE_DESTROY_ALL_POPUP).subscribe(function(){e.setState({popups:[]})})}},{key:"renderPopup",value:function(e){var t=e.component,n=Object.assign({},e);return delete n.component,r.a.createElement(t,{key:e.id,popup:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.popups.map(function(t){return e.renderPopup(t)}))}}]),t}(a.Component),j=n(2),G=n.n(j),M=n(11),H=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"dragStart",value:function(e,t){e.preventDefault(),I.set(s.SELECTED_CELL,Object(v.a)({},this.props,{container:this.props.container,drag:!0,direction:t}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"timesheet-drag"},r.a.createElement("div",{onMouseDown:function(t){return e.dragStart(t,s.GRID_DIRECTION_TOP)},onClick:function(e){return e.stopPropagation()},draggable:!0,className:"top"}),r.a.createElement("div",{onMouseDown:function(t){return e.dragStart(t,s.GRID_DIRECTION_BOTTOM)},onClick:function(e){return e.stopPropagation()},draggable:!0,className:"bottom"}),r.a.createElement("div",{onMouseDown:function(t){return e.dragStart(t,s.GRID_DIRECTION_LEFT)},onClick:function(e){return e.stopPropagation()},draggable:!0,className:"left"}),r.a.createElement("div",{onMouseDown:function(t){return e.dragStart(t,s.GRID_DIRECTION_RIGHT)},onClick:function(e){return e.stopPropagation()},draggable:!0,className:"right"}))}}]),t}(a.Component),A=n(23),U=["fa-birthday-cake","fa-tree","fa-exclamation-circle","fa-credit-card","fa-book","fa-lock"],Y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={start:null,end:null,restaurant:null,room:null,first_name:"New",last_name:"User",status:"validated-confirmed",event_type:["birthday-cake"],icons:[],number_people:0,note:"",charge:0,locked:0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(A.a)({},t.name,t.value))}},{key:"handleIcon",value:function(){var e=Object(M.a)(G.a.mark(function e(t){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.icons.includes(t)){e.next=6;break}return e.next=4,this.setState({icons:this.state.icons.filter(function(e){return e!==t})});case 4:e.next=8;break;case 6:return e.next=8,this.setState({icons:[].concat(Object(E.a)(this.state.icons),[t])});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(M.a)(G.a.mark(function e(){var t;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.popup.bind,!Object.keys(t.form)){e.next=4;break}return e.next=4,this.setState(t.form);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parser",value:function(){var e=Object(M.a)(G.a.mark(function e(){var t=this;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:["number_people"].map(function(){var e=Object(M.a)(G.a.mark(function e(n){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state[n]){e.next=3;break}return e.next=3,t.setState(Object(A.a)({},n,parseInt(t.state[n])));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(M.a)(G.a.mark(function e(){var t,n;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.popup.bind,e.next=3,this.parser();case 3:n=[],this.state.start||this.state.end||(n=F({time:t.selected_cell.time,grid_data:t.grid_data})),I.push(s.PUSH_EVENT,Object(v.a)({},this.state,{start:this.state.start||n[0].format(g),end:this.state.end||n[1].format(g),restaurant:this.state.restaurant||t.selected_cell.restaurant,room:this.state.room||t.selected_cell.room})),k();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"overlay",onClick:function(){return k()}}),r.a.createElement("div",{className:"popup timesheet-edit"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{type:"text",name:"first_name",value:this.state.first_name,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{type:"text",name:"last_name",value:this.state.last_name,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Number People"),r.a.createElement("input",{type:"number",name:"number_people",min:"0",step:"1",value:this.state.number_people,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Icons"),r.a.createElement("div",{className:"icon-lists"},U.map(function(t,n){return r.a.createElement("i",{key:n,className:"fa ".concat(t," ").concat(e.state.icons.includes(t)),onClick:function(){return e.handleIcon(t)}})}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Note"),r.a.createElement("textarea",{name:"note",onChange:function(t){return e.handleChange(t)},value:this.state.note,rows:5})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Status"),r.a.createElement("select",{name:"status",value:this.state.status,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"validated-confirmed"},"Validated/Confirmed"),r.a.createElement("option",{value:"honoured"},"Honoured"),r.a.createElement("option",{value:"partially-honoured"},"Partialy Honoured"),r.a.createElement("option",{value:"to-be-validated"},"To be validated/optional"),r.a.createElement("option",{value:"pending-charge"},"Pending charge"),r.a.createElement("option",{value:"joined-table"},"Joined Table"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{onClick:function(){return e.handleSave()}},"Save"))))}}]),t}(a.Component),V=n(19),F=(n(25),function(e){var t=e.time,n=e.grid_data,a=t.clone(),r=n.x===s.GRID_DIRECTION_RIGHT?a.add(15*n.block_count,"minutes"):a.subtract(15*n.block_count,"minutes");return t.isSameOrAfter(r)?[r,t]:[t,r]}),B=function(e){var t=e.popup,n=e.form,a=e.grid_data;I.push(s.CORE_POPUP,{component:Y,bind:{selected_cell:t.bind.selected_cell,grid_data:a,form:n||{}}})},W=function(e){var t=e.popup,n=t.bind.selected_cell,a=n.room,c=n.time,o=t.bind.grid_data,i=F({grid_data:o,time:c});return r.a.createElement("div",null,r.a.createElement("div",{className:"overlay",onClick:function(){return k()}}),r.a.createElement("div",{className:"popup popup-new-cell"},r.a.createElement("div",{className:"list head"},"Room"," ".concat(a.name)," - ",i[0].format("HH:mm")," : ",i[1].format("HH:mm")),r.a.createElement("div",{className:"list",onClick:function(){return B({popup:t,grid_data:o})}},"New Booking"),r.a.createElement("div",{className:"list",onClick:function(){return function(e){var t=e.popup.bind,n=t.selected_cell,a=t.grid_data,r=F({grid_data:a,time:n.time});if(0===a.block_count)return alert("Invalid Time Range");I.push(s.PUSH_EVENT,{start:r[0].format(g),end:r[1].format(g),restaurant:n.restaurant,room:n.room,last_name:"Walk In",status:"walk-in"}),k()}({popup:t})}},"Walk-in")))},J=function(e){var t=e.popup,n=t.bind,a=n.room,c=n.time,o=n.event,i=function(e){I.push(s.PUSH_EVENT,Object(v.a)({},o,e)),k()};return r.a.createElement("div",null,r.a.createElement("div",{className:"overlay",onClick:function(){return k()}}),r.a.createElement("div",{className:"popup popup-edit-cell"},r.a.createElement("div",{className:"list head"},"Room ",a.name," ",V(c,g).format("- HH:mm")),r.a.createElement("div",{className:"list",onClick:function(){return i({status:"honoured"})}},"Booking honoured"),r.a.createElement("div",{className:"list"},"Waiting for other guests"),r.a.createElement("div",{className:"list",onClick:function(){return i({_clear:!0})}},"No show"),r.a.createElement("div",{className:"list",onClick:function(e){return B({popup:t,form:t.bind.event})}},"Edit booking"),r.a.createElement("div",{className:"list",onClick:function(){return i({locked:!0})}},"Freeze"),r.a.createElement("div",{className:"list"},"Cancel"),r.a.createElement("div",{className:"list"},"Customer Information")))},q=n(25),X=n(19),Z={6:["number_people","last_name","first_name","icon:7"],5:["number_people","last_name","icon:6"],4:["number_people","last_name","icon:4"],3:["number_people","last_name","icon:2"],2:["number_people","last_name"],1:["last_name"]},z=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).container=Object(a.createRef)(),n.subscribers=[],n.state={my_cell_position:0,my_fill_cell_position:0,key:"",is_blocked:!1,event:{},subscribers:[]},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"openPopupEdit",value:function(e){e.preventDefault(),e.stopPropagation();var t={component:J,position:x(e),bind:Object(v.a)({},this.props,{event:this.state.event})};I.push(s.CORE_POPUP,t)}},{key:"openPopupEmpty",value:function(e){e.stopPropagation();var t=I.get(s.SELECTED_CELL),n=I.get(s.GRID_DIRECTION_FINAL);this.setVertical(null,!0);var a={component:W,position:x(e),bind:{selected_cell:t,grid_data:n}};I.push(s.CORE_POPUP,a)}},{key:"emptyCell",value:function(e){if(e.stopPropagation(),!I.get(s.SELECTED_CELL))return this.setVertical(e.clientX);this.openPopupEmpty(e)}},{key:"setVertical",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q(".timesheet-vertical");if(t)return I.set(s.SELECTED_CELL,null),void n.removeClass("active");I.set(s.SELECTED_CELL,Object(v.a)({},this.props,{container:this.container,direction:s.GRID_DIRECTION_HORIZONTAL})),n.addClass("active"),n.css({left:"".concat(e,"px")})}},{key:"componentWillMount",value:function(){var e,t=this,n=this.props,a=[I.watch(L(n)).subscribe(function(){var e=Object(M.a)(G.a.mark(function e(n){var a;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return a=y({start:X(n.start,g),end:X(n.end,g),step:15}).length+1,e.next=4,t.setState({is_blocked:!0,event:Object(v.a)({},n,{duration:a})});case 4:e.next=8;break;case 6:return e.next=8,t.setState({is_blocked:!1,event:{}});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())];(e=this.subscribers).push.apply(e,a)}},{key:"componentDidMount",value:function(){this.setState({my_cell_position:this.container.current.getBoundingClientRect()})}},{key:"componentWillUnmount",value:function(){this.subscribers.length&&this.subscribers.map(function(e){return e.unsubscribe()})}},{key:"renderContent",value:function(){var e=this.state.event,t=Z[e.duration>5?6:e.duration],n="";return t.map(function(t){if(t.includes(":")){var a=parseInt(t.split(":")[1]);return n+=(e.icons||[]).filter(function(e,t){return t<a}).reduce(function(e,t){return"".concat(e,'<i class="fa ').concat(t,'"></i>')},"")}e[t]&&(n+="<span>".concat(e[t],"</span>"))}),{__html:n}}},{key:"render",value:function(){var e=this,t=this.state.event||{styles:{}};return r.a.createElement("div",{className:"cell",ref:this.container,onClick:function(t){return e.emptyCell(t)}},this.state.is_blocked?r.a.createElement("div",{className:"filled-block ".concat(t.status),onContextMenu:function(t){return e.openPopupEdit(t)},onClick:function(t){return e.openPopupEdit(t)},style:Object(v.a)({},t.styles,{width:"".concat(t.duration*ce,"px")})},r.a.createElement(H,Object.assign({},this,{container:this.container})),r.a.createElement("div",{dangerouslySetInnerHTML:this.renderContent()})):"")}}]),t}(a.Component),$=n(19),K=function(e){for(var t=[],n=0;n<e;n++)t.push({name:n+1,capacity:Math.round(9*Math.random())});return t},Q=function(){var e=localStorage.getItem("_data");return e=e?JSON.parse(e):[],Object(v.a)({},ee,{events:e})},ee={mouse_move:0,locations:[{name:"Restaurant 1",children:K(30)},{name:"Restaurant 2",children:K(30)}],selected_time:{start:$("".concat($().format("YYYY/MM/DD"),":05:00"),g),end:$("".concat($().add(1,"days").format("YYYY/MM/DD"),":05:00"),g),step:15}},te=function(e){var t=e.selected;return r.a.createElement("div",{className:"head head-scroll"},y(t).map(function(e,t){return r.a.createElement("div",{className:"cell",key:t},e.format("HH:mm"))}))},ne=function(e){var t=e.lists;return r.a.createElement("div",{className:"aside"},t.map(function(e,t){e.name;var n=e.children;return r.a.createElement("div",{className:"side-item",key:t},0===t?r.a.createElement("div",{className:"side-list side-placeholder"},r.a.createElement("div",{className:"name"}),r.a.createElement("div",{className:"placeholder"})):"",r.a.createElement("div",{className:"side-list side-scroll side-restaurant"}),r.a.createElement("div",{className:"list-item side-scroll"},n.map(function(e,t){return r.a.createElement("div",{className:"group",key:t},r.a.createElement("div",{className:"name-room"},e.name),r.a.createElement("div",{className:"capacity-room"},e.capacity))})))}))},ae=(n(56),n(25)),re=n(19),ce=70;var oe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Q(),n.timelooper=void 0,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.timelooper=y(this.state.selected_time),I.watch(s.PUSH_EVENT).subscribe(function(){var t=Object(M.a)(G.a.mark(function t(n){return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.events.find(function(e){return e.id===n.id})){t.next=10;break}if(e.pushEvents(!0),!0!==n._clear){t.next=6;break}t.next=8;break;case 6:return t.next=8,e.setState({events:e.state.events.map(function(e){return e.id===n.id?Object(v.a)({},e,n):e})});case 8:return localStorage.setItem("_data",JSON.stringify(e.state.events)),t.abrupt("return",e.pushEvents());case 10:return!n.id&&(n.id=T()),t.next=13,e.setState({events:[].concat(Object(E.a)(e.state.events),[n])});case 13:localStorage.setItem("_data",JSON.stringify(e.state.events)),e.pushEvents();case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){I.set(s.LOCATIONS,this.state.locations),this.pushEvents(),I.watch(s.CORE_SCROLL).subscribe(function(e){var t=e.x,n=e.y;ae(".side-scroll").css({transform:"translateX(".concat(t,"px)")}),ae(".header-top").css({transform:"translateX(".concat(t,"px)")}),n>80?(ae(".head").css({transform:"translateY(".concat(n-80,"px)")}),ae(".timesheet-vertical").css({transform:"translateY(-80px)"})):(ae(".head").css({transform:"translateY(0px)"}),ae(".timesheet-vertical").css({transform:"translateY(0px)"}))});var e=re(),t=e.format(g.replace("/DD:HH:mm","")),n=parseInt(e.format("mm")),a=parseInt(e.format("HH")),r=parseInt(e.format("DD")),c=15*Math.floor(n/15),o=re("".concat(t,":").concat(a>5?r:r+1,":").concat(a,":").concat(c),g),i=y({start:this.state.selected_time.start,end:re(o,g)}).length,l=195+i*ce,u=ae("body").height();ae(".timesheet-vertical-stay").css({left:"".concat(l,"px"),height:"".concat(u-110,"px")}),setTimeout(function(){return S(i*ce-100,null)},500)}},{key:"handleMouseMove",value:function(){var e=Object(M.a)(G.a.mark(function e(t){var n,a,r,c,o,i,l,u,m,p,d,f,E,h,_,b,O,N,C,R;return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(n=I).get(s.SELECTED_CELL)){e.next=4;break}return e.abrupt("return",n.set(s.GRID_START_MOVE,null));case 4:if((r=n.get(s.GRID_START_MOVE))||(n.set(s.GRID_START_MOVE,x(t)),r=x(t)),c=ae(".timesheet-hover"),o=x(t),i=ae(a.container.current),l=i[0].getBoundingClientRect(),u=i.index(),m=i.parent(),p=0,d={x:null,y:null},i.addClass("hover"),a.direction!==s.GRID_DIRECTION_HORIZONTAL&&a.direction!==s.GRID_DIRECTION_RIGHT&&a.direction!==s.GRID_DIRECTION_LEFT){e.next=30;break}if(f=o.x>r.x,d.x=f?s.GRID_DIRECTION_RIGHT:s.GRID_DIRECTION_LEFT,a.direction!==s.GRID_DIRECTION_RIGHT||f){e.next=20;break}return e.abrupt("return");case 20:if(a.direction!==s.GRID_DIRECTION_LEFT||!f){e.next=22;break}return e.abrupt("return");case 22:(p=Math.floor(Math.abs(l.x-o.x)/ce))&&(E=m.find(".cell"),h=D(u,f?u+p:u-p),E.filter(h).addClass("hover"),E.not(h).removeClass("hover")),_=f?u+p:u-p,b=m.find(".cell").eq(p?_:u),O=b[0].getBoundingClientRect().x,ae(".timesheet-vertical").css({left:"".concat(O+35,"px")}),e.next=41;break;case 30:if(N=o.y<r.y,d.y=N?s.GRID_DIRECTION_TOP:s.GRID_DIRECTION_BOTTOM,a.direction!==s.GRID_DIRECTION_TOP||N){e.next=34;break}return e.abrupt("return");case 34:if(a.direction!==s.GRID_DIRECTION_BOTTOM||!N){e.next=36;break}return e.abrupt("return");case 36:c.css({left:"".concat(l.x,"px"),top:"".concat(l.y,"px"),width:"".concat(l.width,"px"),height:"".concat(l.height,"px")}),C=a.state.event,p=Math.floor(Math.abs(l.y-o.y)/30),c.css({width:"".concat(l.width*C.duration,"px")}),p&&(R=30*p,N?c.css({height:"".concat(R,"px"),transform:"translateY(-".concat(R,"px)")}):c.css({height:"".concat(R,"px"),transform:"translateY(".concat(30,"px)")}));case 41:n.set(s.GRID_DIRECTION_FINAL,Object(v.a)({},d,{block_count:p}));case 42:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleMouseUp",value:function(e){var t=I,n=t.get(s.SELECTED_CELL);if(n&&!0===n.drag){R(".timesheet-hover").css({height:0,width:0,transform:"",left:0,top:0});var a=t.get(s.SELECTED_CELL),r=t.get(s.GRID_DIRECTION_FINAL)||{x:0,y:0},c=a.state.event;if(t.set(s.SELECTED_CELL,null),ae(".cell").removeClass("hover"),r.x===s.GRID_DIRECTION_LEFT||r.x===s.GRID_DIRECTION_RIGHT){r.x===s.GRID_DIRECTION_RIGHT?t.push(s.PUSH_EVENT,Object(v.a)({},c,{end:re(c.start,g).add(15*r.block_count,"minutes").format(g)})):t.push(s.PUSH_EVENT,Object(v.a)({},c,{start:re(c.start,g).subtract(15*r.block_count,"minutes").format(g)}))}else{var o=r.y===s.GRID_DIRECTION_TOP,i=I.get(s.LOCATIONS).find(function(e){return e.name===c.restaurant}).children,l=i.findIndex(function(e){return e.name===c.room.name});i.filter(function(e,t){return o?t<l&&t>=l-r.block_count:t>l&&t<=l+r.block_count}).map(function(e,n){setTimeout(function(){return t.push(s.PUSH_EVENT,Object(v.a)({},c,{id:null,room:e}))},50*n)})}}}},{key:"pushEvents",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.state.events.map(function(e){var t=Object(v.a)({time:re(e.start,g)},e);I.push(L(t),null)}):this.state.events.map(function(e){var t=Object(v.a)({time:re(e.start,g)},e);I.push(L(t),e)})}},{key:"shouldComponentUpdate",value:function(e,t,n){return!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"timetable-root",onMouseUp:function(t){return e.handleMouseUp(t)},onMouseMove:function(t){return e.handleMouseMove(t)}},r.a.createElement(ne,{lists:this.state.locations}),r.a.createElement("div",{className:"timetable-item"},r.a.createElement(te,{selected:this.state.selected_time}),this.state.locations.map(function(t,n){var a=t.name,c=t.children;return r.a.createElement("div",{key:n},r.a.createElement("div",{className:"row row-restaurant"},r.a.createElement("span",{className:"side-scroll"},a)),r.a.createElement("div",{className:"placeholder-row"},c.map(function(t,n){return r.a.createElement("div",{className:"row",key:n},e.timelooper.map(function(e,n){return r.a.createElement(z,{siblings:c,key:n,restaurant:a,time:e,room:t})}))})))})),r.a.createElement("div",{className:"timesheet-hover"}),r.a.createElement("div",{className:"timesheet-vertical"}),r.a.createElement("div",{className:"timesheet-vertical-stay current-time"}))}}]),t}(a.Component),se=n(34),ie=n(27),le=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",function(){I.push(s.CORE_SCROLL,{y:window.scrollY,x:window.scrollX})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("main",null,r.a.createElement(f,null),r.a.createElement("div",{className:"main-container"},r.a.createElement(se.a,null,r.a.createElement(ie.c,null,r.a.createElement(ie.a,{path:"/",component:oe}),r.a.createElement(ie.a,{path:"/:data",component:oe}))))),r.a.createElement(P,null))}}]),t}(a.Component);o.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,2,1]]]);
//# sourceMappingURL=main.2ca229b2.chunk.js.map